<!DOCTYPE HTML>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.min.css" >
    <link rel="stylesheet" href="css/main.css" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="JSFiles/main.js"></script>
    <script src="JSFiles/showWishList.js"></script>
    <!--<script src='https://www.google.com/recaptcha/api.js'></script>-->


    <script>

     $(document).ready(function () {
       var buyingProdID = "";
       var buyingProdURL = "";
       var eventID = $("#evntID").val();

       //Replace footer links here
       const baseURL = "http://bemygenie.com:8080";
       $("#FAQpage").replaceWith('<a id="FAQpage" href="'+baseURL+'/FAQ.html" target="_blank"> FAQs </a>');


       function searchCatg() {
         var genreStr = [];
         var priceStr = [];
         var gpStr = [];
         var srchStr;
         var chkCnt = 0;
         var cnt = 0;
         var prcChkCnt = 0;

         var genreAll = ['A','C','Y','U','B','D','E','X','V','H','G','L','M','N','O','P','S','F','R','T','I','W','Q','K','J'];
         var priceAll = ['0','5','1','2','3'];

         $.each($("input[name='chkValGen']:checked"), function(){genreStr.push($(this).val());chkCnt++});
         $.each($("input[name='chkValPrc']:checked"), function(){priceStr.push($(this).val());prcChkCnt++});

         if (chkCnt > 0 && prcChkCnt > 0) {
           for (i=0;i<genreStr.length;i++) {for (j=0;j<priceStr.length;j++) {gpStr[cnt]='"'+genreStr[i]+priceStr[j]+'"';cnt++;}}
         }
         else if (chkCnt > 0 && prcChkCnt == 0) {
           for (i=0;i<genreStr.length;i++) {for (j=0;j<priceAll.length;j++) {gpStr[cnt]='"'+genreStr[i]+priceAll[j]+'"';cnt++;}}
         }
         else if (chkCnt == 0 && prcChkCnt > 0) {
           for (i=0;i<genreAll.length;i++) {for (j=0;j<priceStr.length;j++) {gpStr[cnt]='"'+genreAll[i]+priceStr[j]+'"';cnt++;}}
         }
          if (cnt > 0) {
            srchStr = '{"Catg":['+gpStr+'],"eventID":"'+eventID+'","catgCount":'+cnt+'}';
            $.ajax({
              type : 'POST',
              url :"/filterWishListByCatg",
              data : {"criteria":srchStr},
              success : function(data) {
                var htmlStr = "";
                var endStr = "";
                var prdName = "";
                var cnt = 0;
                htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper">';
                if (data.length > 0) {
                  $.each(data, function(key,doc){
                    try {
                      prdName = doc.ProdNm;
                      if (cnt%4 == 0){htmlStr = htmlStr + '<div class = "row">'}
                      htmlStr = htmlStr + '<div class="col-sm-3"><div class="thumbnail">';
                      htmlStr = htmlStr + '<div class="thumbnail" style="height:215px;border:0;">';
                      htmlStr = htmlStr + '<img id = "imgURL_'+doc.ProdID+'" src="'+doc.ImageURL+'">';
                      htmlStr = htmlStr + '<div class="caption"><p id="ProdNm_'+doc.ProdID+'" align="middle">'+prdName+'</p></div></div>';
                      htmlStr = htmlStr + '<div class="caption"><p align="middle"> INR '+doc.MRP+'</p></div>';
                      if (doc.Status == "Blocked")
                        {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info disabled" id="btn_'+doc.ProdID+'">Blocked</button></p>'}
                      else if (doc.Status == "Bought")
                        {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info disabled" id="btn_'+doc.ProdID+'">Already Bought</button></p>'}
                      else
                        {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info" onclick=buyNow("'+doc.ProdID+'","'+doc.ProdDsc+'") id="btn_'+doc.ProdID+'">Buy Now</button></p>'}

                      htmlStr = htmlStr + '</div></div>';
                      cnt++;
                      if (cnt%4 == 0){htmlStr = htmlStr + "</div>"};
                    }
                    catch (e) {$("#alertModal").modal('show')}
                  }) //for each
                  if (cnt%4 != 0) {htmlStr = htmlStr + "</div>"};
                  htmlStr = htmlStr + '<hr></div>';
                  $('#carousel-wrapper').replaceWith(htmlStr);
                }
                else {
                  htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper"> <div class = "row">';
                  htmlStr = htmlStr + '<p style = "padding-top:20px"><h5>No products found with your matching criteria</h5></p>';
                  htmlStr = htmlStr + "</div></div>";
                  $('#carousel-wrapper').replaceWith(htmlStr);
                }
              },
             error: function(res) {
               htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper"> <div class = "row">';
               htmlStr = htmlStr + '<p style = "padding-top:20px"><h5>No products found with your matching criteria</h5></p>';
               htmlStr = htmlStr + "</div></div>";
               $('#carousel-wrapper').replaceWith(htmlStr);
             }
           });
         }
         else {
           srchStr = '{"eventID":"'+eventID+'","catgCount":'+0+'}';
           $.ajax({
             type : 'POST',
             url :"/filterWishListByCatg",
             data : {"criteria":srchStr},
             success : function(data) {
               var htmlStr = "";
               var endStr = "";
               var prdName = "";
               var cnt = 0;
               htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper">';
               if (data.length > 0) {
                 $.each(data, function(key,doc){
                   try {
                     prdName = doc.ProdNm;
                     if (cnt%4 == 0){htmlStr = htmlStr + '<div class = "row">'}
                     htmlStr = htmlStr + '<div class="col-sm-3"><div class="thumbnail">';
                     htmlStr = htmlStr + '<div class="thumbnail" style="height:215px;border:0;">';
                     htmlStr = htmlStr + '<img id = "imgURL_'+doc.ProdID+'" src="'+doc.ImageURL+'">';
                     htmlStr = htmlStr + '<div class="caption"><p id="ProdNm_'+doc.ProdID+'" align="middle">'+prdName+'</p></div></div>';
                     htmlStr = htmlStr + '<div class="caption"><p align="middle"> INR '+doc.MRP+'</p></div>';
                     if (doc.Status == "Blocked")
                       {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info disabled" id="btn_'+doc.ProdID+'">Blocked</button></p>'}
                     else if (doc.Status == "Bought")
                       {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info disabled" id="btn_'+doc.ProdID+'">Already Bought</button></p>'}
                     else
                       {htmlStr = htmlStr + '<p align="middle"><button class="btn btn-info" onclick=buyNow("'+doc.ProdID+'","'+doc.ProdDsc+'") id="btn_'+doc.ProdID+'">Buy Now</button></p>'}

                     htmlStr = htmlStr + '</div></div>';
                     cnt++;
                     if (cnt%4 == 0){htmlStr = htmlStr + "</div>"};
                   }
                   catch (e) {$("#alertModal").modal('show')}
                 }) //for each
                 if (cnt%4 != 0) {htmlStr = htmlStr + "</div>"};
                 htmlStr = htmlStr + '<hr></div>';
                 $('#carousel-wrapper').replaceWith(htmlStr);
               }
               else {
                 htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper"> <div class = "row">';
                 htmlStr = htmlStr + '<p style = "padding-top:20px"><h4>No products found with your matching criteria</h4></p>';
                 htmlStr = htmlStr + "</div></div>";
                 $('#carousel-wrapper').replaceWith(htmlStr);
               }
             },
            error: function(res) {
              htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper"> <div class = "row">';
              htmlStr = htmlStr + '<p style = "padding-top:20px"><h4>No products found with your matching criteria</h4></p>';
              htmlStr = htmlStr + "</div></div>";
              $('#carousel-wrapper').replaceWith(htmlStr);
            }
          });
         }
       }

         $("#chkGenre").change(function() {searchCatg()});
         $("#chkEvntType").change(function() {searchCatg()});
         $("#chkPrice").change(function() {searchCatg()});

     }); //ready

     </script>
  </head>


  <body>
    <!-- Modal Starts here-->
      <div class="modal fade" id="alertModal" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Fatal Error!</h4>
            </div>
            <div class="modal-body">
              <p>There was an error in processing your request. Please try after sometime.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          </div>

        </div>
      </div>
    <!-- Modal Ends here-->

    <nav class="navbar navbar-default navbar-fixed-top">
          <div class="nav-container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand wide" href="#">bemygenie.com</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
              </ul>
              <ul class="nav navbar-nav navbar-right">
                <li><a href="#" class="invisible">Planning event</a></li>   <!--change this-->
                <li><a href="#show-cart" class="invisible">Cart</a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
    </nav> <!--Navigation bar -->

    <!-- Carousel
           ================================================== -->
    <div class = "container-fluid" style="padding-top:100px"> <!-- This is the carousel holder - Being added to accomodate a wider Nav Bar-->
      <!-- Modal -->
      <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog">
          <div class = "modal-content">
            <div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close">×</button></div>
            <div class="modal-body">
              <p>Hi There!!!,</p>
              <p>You will now be redirected to the third party website where you can buy and ship the product to your desired destination.</p>
              <p>Please note, that this product will be blocked as bought by you. For some reason if you do not complete your purchase, We urge you to kindly
                comeback to this page and notify us of the same.</p>
              <br>
              <p>We Thank You for your kind support in helping us serve better</p>
            </div>
            <div class="modal-footer">
              <button type="button" id="closeBtn" class="btn btn-default" style="display:default" data-dismiss="modal">Close</button>
              <button type="button" id="buyBtn" class="btn btn-success" style="display:default" onclick="openAmznPage()">Proceed to Buy</button>
              <button type="button" id="boughtButton" class="btn btn-success" style="display:none" onclick="changeGiftStatus('Bought')">Purchase Completed</button>
              <button type="button" id="didNotBuy" class="btn btn-warning" style="display:none" onclick="changeGiftStatus('Available')">Did not Buy</button>
            </div>
          </div>
        </div>
      </div>
        <!--div class = "container-fluid"-->
          <!--Quick filters-->
          <div class = "col-sm-2">
            <div class = "panel-group">
              <div class = "panel panel-default">
                <div class = "panel-heading">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapseGenre">Genre</a></h4>
                </div> <!--Panel heading-->
                <div id="collapseGenre" class="panel-collapse collapse">
                  <form>
                    <div class = "checkbox" id = "chkGenre">
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" id="genreApparel" value="A">Apparel</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="C">Automobile</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="Y">Baby Items</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="U">Beauty Products</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" id = "genreBooks" value="B">Books</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="D">DVD</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="E">Electronics</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="X">Experiences</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="V">Gift Cards</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="H">Health & Personal Care</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="G">Home & Garden</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="L">Luggage</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="M">Music</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="N">Musical Instruments</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="O">Office Products</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="P">PC Hardware</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="S">Shoes</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="F">Software</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" id = "genreSports" value="R">Sports Goods</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" id = "genreToys" value="T">Toys</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="I">Video Games</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="W">Watches</label>
                    </div>
                  </form>
                </div><!--Panel items-->
              </div> <!--Panel Genre-->

              <div class = "panel panel-default">
                <div class = "panel-heading">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapsePrice">Price</a></h4>
                </div> <!--Panel heading-->
                <div id="collapsePrice" class="panel-collapse collapse">
                  <form>
                    <div class = "checkbox" id="chkPrice">
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="0">0 - 500</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="5">500 - 1000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="1">1000 - 2000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="2">2000 - 3000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="3"> 3000 - More </label><br>
                    </div>
                  </form>
                </div><!--Panel items-->
              </div> <!--Panel Genre-->

            </div><!--Panel group-->
          </div>
          <!--Category Carousel & Thumbnails-->
          <div class = "col-sm-10">
            <div class = "row" style="padding-top:10px">
              <div class = "form-group form-inline">
                <label for="evntID">You are viewing event :</label>
                <input type="text" class="form-control" id="evntID" value= <%=eventID%> disabled>
              </div>
              <hr>
              <div class = "carousel-wrapper" id="carousel-wrapper">
                <!--<form class="form form-inline">
                  <div class="row"><div class="col-xs-3">
                  <div class="g-recaptcha" data-sitekey="6Ld_OyEUAAAAAMQh2o1KMDMaGhi6QlaiPEZDHGW8"></div> <!-recapcha widget-
                </div><div class="col-xs-2"><p style="text-align:center;padding-top:15px"><button type="button" class = "btn btn-primary btn-lg active" id="proceedBtn" onclick="verifyCaptcha()">GO <span class="glyphicon glyphicon-play"></span></button></p>
                </div><div class="col-xs-7"></div></div>
                </form>
                <hr>-->
              </div> <!--wishlist-wrapper -->
          </div> <!-- wishlist row -->
          </div>
        <!--/div-->
       </div> <!-- /.carousel holder -->



     <footer>
       <div class="footer" id="footer">
         <div class="container">
             <div class="row">
                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                     <h3> bemygenie.com </h3>
                     <ul>
                         <li> <a href="#"> About Us </a> </li>
                         <li> <a href="#"> Careers </a> </li>
                         <li> <a href="#"> Advertise with us </a> </li>

                     </ul>
                 </div>
                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                   <h3> Products & Services </h3>
                   <ul>
                         <li> <a href="#"> Gift Registers </a> </li>
                         <li> <a href="#"> Sell your products on our site. </a> </li>
                         <li> <a href="#"> Partner Login. </a> </li>
                     </ul>
                 </div>
                 <div class="col-lg-2  col-md-3 col-sm-6 col-xs-12 ">
                   <h3> Help </h3>
                   <ul>
                         <li> <a id="FAQpage" href="#" target="_blank"> FAQs </a> </li>
                         <li> <a href="#"> Terms & Conditions </a> </li>
                         <li> <a href="#"> Privacy Policy </a> </li>
                         <li> <a href="#"> Shipping & Returns Policy </a> </li>
                     </ul>
                 </div>

                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                     <h3> Join our newsletter </h3>
                     <ul>
                         <li>
                             <div class="input-append newsletter-box text-center">
                                 <input type="text" class="full text-center" placeholder="Email ">
                                 <button class="btn btn-success" type="button"> Thank you! <i class="fa fa-long-arrow-right"> </i> </button>
                             </div>
                         </li>
                     </ul>
                     <ul class="social">
                         <li> <a href="#"> <i class=" fa fa-facebook">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-twitter">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-pinterest">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-youtube">   </i> </a> </li>
                     </ul>
                 </div>
             </div>
             <!--/.row-->
         </div>
         <!--/.container-->
     </div>
     <!--/.footer-->

     <div class="footer-bottom">
         <div class="container">
             <p class="pull-left"> Copyright © bemygenie.com 2016 </p>
             <p class="pull-right" style="padding-top:6px"> Design by <a href="mailto:trznt.technologies@gmail.com" style="color:#ffffff">trznt</a></a>.</p>
         </div>
     </div>
     <!--/.footer-bottom-->
 </footer>



  </body>


  </html>
