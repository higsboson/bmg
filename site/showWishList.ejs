<!DOCTYPE HTML>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.min.css" >
    <link rel="stylesheet" href="css/main.css" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <script src="JSFiles/main.js"></script>
    <script src="JSFiles/showWishList.js"></script>


    <script>

     $(document).ready(function () {
         function searchCatg() {
            var genreStr = [];
            var priceStr = [];
            var gStr = [];
            var gpStr = [];
            var evntTypeStr = [];
            var srchStr = [];
            var chkCnt = 0;
            var cnt = 0;

            var genreAll = ['B','T','A','S','E','V'];
            var priceAll = ['0','5','1','2','3'];
            var eventAll = ['B','S','A','W'];
            var eventID = $("#evntID").val();

            $.each($("input[name='chkValGen']:checked"), function(){genreStr.push($(this).val());chkCnt++});
            if (chkCnt > 0) {for (i=0;i<genreStr.length;i++) {gStr[i]=genreStr[i]}}
            else {for (i=0;i<genreAll.length;i++) {gStr[i]=genreAll[i]}}

            chkCnt = 0;
            $.each($("input[name='chkValPrc']:checked"), function(){priceStr.push($(this).val());chkCnt++});
            for (i=0;i<gStr.length;i++){
               if (chkCnt > 0) {for (j=0;j<priceStr.length;j++) {gpStr[cnt] = gStr[i] + priceStr[j];cnt++}}
               else {for (j=0;j<priceAll.length;j++) {gpStr[cnt] = gStr[i] + priceAll[j];cnt++}}
            }

            chkCnt = 0;
            cnt = 0;
            $.each($("input[name='chkValEventType']:checked"), function(){evntTypeStr.push($(this).val());chkCnt++});
            for (i=0;i<gpStr.length;i++){
                if (chkCnt > 0) {for (j=0;j<evntTypeStr.length;j++) {srchStr[cnt] = evntTypeStr[j] + gpStr[i];cnt++}}
                else {for (j=0;j<eventAll.length;j++) {srchStr[cnt] = eventAll[j] + gpStr[i];cnt++}}
            }

            if (cnt > 0) {
               $.get( "/filterWishListByCatg",{Catg:srchStr,eventID : eventID}, function( data, status ) {
                if (status == 'success'){ //changed since last version on 24 Jan.. fix no records returned issue
                  var htmlStr = "";
                  var endStr = "";
                  htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper">';

                  $.each(data, function(key,doc){
                    try {
                      flg = doc.ProdNm;
                      if (cnt%4 == 0){htmlStr = htmlStr + '<div class = "row">'}
                      htmlStr = htmlStr + '<div class="col-sm-3"><div class="thumbnail">';
                      htmlStr = htmlStr + '<a id = "detURL_'+doc.ProdID+'" href='+doc.ProdDsc+'>';
                      htmlStr = htmlStr + '<img id = "imgURL_'+doc.ProdID+'" src='+doc.ImageURL+'>';
                      htmlStr = htmlStr + '<div class="caption"><p id="ProdNm_'+doc.ProdID+'" align="middle">'+doc.ProdNm+'</p>';
                      htmlStr = htmlStr + '<p align="middle"> INR '+doc.MRP+'</p></div></a>';
                      htmlStr = htmlStr + '<p align="middle"><button type="button" class="btn btn-default" id="addtocart_'+cnt+'" onclick=AddToCart("'+doc.ProdID+'","'+doc.MRP+'","'+doc.ProdGrp+'")>Add to wishlist</button></p>';
                      htmlStr = htmlStr + '</div></div>'
                      cnt++;
                      if (cnt%4 == 0){htmlStr = htmlStr + "</div>"};
                   }
                   catch (e) {}
                  }) //for each
                  if (cnt%4 != 0) {htmlStr = htmlStr + "</div>"};
                  htmlStr = htmlStr + '<hr></div>';
                  //alert(htmlStr);
                  $('#carousel-wrapper').replaceWith(htmlStr);
               }
               else {
                 htmlStr = '<div class = "carousel-wrapper" id="carousel-wrapper"> <div class = "row">';
                 htmlStr = '<p style = "padding-top:100px">No products found with your matching criteria</p>'
                 htmlStr = "</div></div>";
                 $('#carousel-wrapper').replaceWith(htmlStr);
               }
             });
           }
         }

         $("#chkGenre").change(function() {searchCatg()});
         $("#chkEvntType").change(function() {searchCatg()});
         $("#chkPrice").change(function() {searchCatg()});

     }); //ready
     </script>
  </head>


  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
          <div class="nav-container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand wide" href="#">bemygenie.com</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
              </ul>
              <ul class="nav navbar-nav navbar-right">
                <li>Planning event</li>   <!--change this-->
                <li><a href="#show-cart">Cart</a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
    </nav> <!--Navigation bar -->

    <!-- Carousel
           ================================================== -->
    <div class = "container-fluid" style="padding-top:100px"> <!-- This is the carousel holder - Being added to accomodate a wider Nav Bar-->

        <!--div class = "container-fluid"-->
          <!--Quick filters-->
          <div class = "col-sm-2">
            <div class = "panel-group">

              <div class = "panel panel-default">
                <div class = "panel-heading">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" href="#eventType">Event Type</a></h4>
                </div> <!--Panel heading-->
                <div id="eventType" class="panel-collapse collapse">
                  <form>
                    <div class = "checkbox" id="chkEvntType">
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValEventType" value="B">Birthday</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValEventType" value="S">Baby Shower</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValEventType" value="A">Anniversary</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValEventType" value="W">Wedding</label><br>
                    </div>
                  </form>
                </div><!--Panel items-->
              </div> <!--Panel Genre-->


              <div class = "panel panel-default">
                <div class = "panel-heading">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapseGenre">Genre</a></h4>
                </div> <!--Panel heading-->
                <div id="collapseGenre" class="panel-collapse collapse">
                  <form>
                    <div class = "checkbox" id = "chkGenre">
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="B">Books</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="T">Toys</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="A">Apparel</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="S">Sports Goods</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="E">Experiences</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValGen" value="V">Gift Vouchers</label>
                    </div>
                  </form>
                </div><!--Panel items-->
              </div> <!--Panel Genre-->

              <div class = "panel panel-default">
                <div class = "panel-heading">
                  <h4 class="panel-title">
                    <a data-toggle="collapse" href="#collapsePrice">Price</a></h4>
                </div> <!--Panel heading-->
                <div id="collapsePrice" class="panel-collapse collapse">
                  <form>
                    <div class = "checkbox" id="chkPrice">
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="0">0 - 500</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="5">500 - 1000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="1">1000 - 2000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="2">2000 - 3000</label><br>
                      <label style="color:#7A7B7C;font-size:16px"><input type="checkbox" name = "chkValPrc" value="3"> 3000 - More </label><br>
                    </div>
                  </form>
                </div><!--Panel items-->
              </div> <!--Panel Genre-->

            </div><!--Panel group-->
          </div>
          <!--Category Carousel & Thumbnails-->
          <div class = "col-sm-10">
            <div class = "row" style="padding-top:10px">
              <div class = "form-group form-inline">
                <label for="evntID">You are viewing event :</label>
                <input type="text" class="form-control" id="evntID" value= <%=eventID%>>
              </div>
              <hr>
              <div class = "carousel-wrapper" id="carousel-wrapper">
              </div> <!--wishlist-wrapper -->
          </div> <!-- wishlist row -->
          </div>
        <!--/div-->
       </div> <!-- /.carousel holder -->



     <footer>
       <div class="footer" id="footer">
         <div class="container">
             <div class="row">
                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                     <h3> bemygenie.com </h3>
                     <ul>
                         <li> <a href="#"> About Us </a> </li>
                         <li> <a href="#"> Careers </a> </li>
                         <li> <a href="#"> Advertise with us </a> </li>

                     </ul>
                 </div>
                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                   <h3> Products & Services </h3>
                   <ul>
                         <li> <a href="#"> Gift Registers </a> </li>
                         <li> <a href="#"> Sell your products on our site. </a> </li>
                         <li> <a href="#"> Partner Login. </a> </li>
                     </ul>
                 </div>
                 <div class="col-lg-2  col-md-3 col-sm-6 col-xs-12 ">
                   <h3> Help </h3>
                   <ul>
                          <li> <a href="#"> FAQs </a> </li>
                         <li> <a href="#"> Terms & Conditions </a> </li>
                         <li> <a href="#"> Privacy Policy </a> </li>
                         <li> <a href="#"> Shipping & Returns Policy </a> </li>
                     </ul>
                 </div>

                 <div class="col-lg-3  col-md-3 col-sm-6 col-xs-12 ">
                     <h3> Join our newsletter </h3>
                     <ul>
                         <li>
                             <div class="input-append newsletter-box text-center">
                                 <input type="text" class="full text-center" placeholder="Email ">
                                 <button class="btn btn-success" type="button"> Thank you! <i class="fa fa-long-arrow-right"> </i> </button>
                             </div>
                         </li>
                     </ul>
                     <ul class="social">
                         <li> <a href="#"> <i class=" fa fa-facebook">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-twitter">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-pinterest">   </i> </a> </li>
                         <li> <a href="#"> <i class="fa fa-youtube">   </i> </a> </li>
                     </ul>
                 </div>
             </div>
             <!--/.row-->
         </div>
         <!--/.container-->
     </div>
     <!--/.footer-->

     <div class="footer-bottom">
         <div class="container">
             <p class="pull-left"> Copyright © bemygenie.com 2016 </p>
             <p class="pull-right" style="padding-top:6px"> Design by <a href="mailto:trznt.technologies@gmail.com" style="color:#ffffff">trznt</a></a>.</p>
         </div>
     </div>
     <!--/.footer-bottom-->
 </footer>



  </body>


  </html>
